{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
    <!-- Boxicons CDN Link -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
<body>
  <div class="sidebar">
    <div class="logo-details">
        <i class='bx bx-menu' id="btn"></i>
    </div>
    <ul class="nav-list">

      <li>
        <div class="icon-links">
          <a href="#">
            <i class='bx bx-collection'></i>
            <span class="links_name">ChatGPT<i class='bx bxs-chevron-down arrow'></i></span>
            <span class="tooltip">Category</span>
          </a>
          <ul class="sub-menu">
            <li class="submenu-item"><a href="{% url 'teste_api' %}">Chat</a></li>
            <li class="submenu-item"><a href="{% url 'chat_historico' %}">Histórico</a></li>
          </ul>
        </div>
      </li>
      
      <li>
        <div class="icon-links">
            <a href="#">
                <i class='bx bx-collection'></i>
                <span class="links_name">SCI <i class='bx bxs-chevron-down arrow'></i></span>
            </a>
            <ul class="sub-menu">
                <li class="sub-menu-item"><a href="{% url 'sci_provisionamento' %}">Chat Provisionamento</a></li>
                <li class="sub-menu-item"><a href="{% url 'sci_relatorio' %}">Chat Relatorio</a></li>
                <li class="sub-menu-item"><a href="{% url 'sci_historico' %}">Histórico SCI</a></li>
            </ul>
        </div>
    </li>
    </ul>
  </div>
  <section class="home-section">
  </section>
  <script>
    let menuItems = document.querySelectorAll(".nav-list li");
  
    menuItems.forEach(item => {
      item.addEventListener("click", (e) => {
        if (!sidebar.classList.contains("open")) {
          sidebar.classList.add("open");
          menuBtnChange(); // Atualiza o ícone do botão
        } else {
          let subMenu = item.querySelector(".sub-menu");
          if (subMenu) {
            subMenu.classList.toggle("open");
          }
        }
      });
    });
  
    let sidebar = document.querySelector(".sidebar");
    let closeBtn = document.querySelector("#btn");
    let searchBtn = document.querySelector(".bx-search");
  
    closeBtn.addEventListener("click", () => {
      sidebar.classList.toggle("open");
      if (!sidebar.classList.contains("open")) {
        closeAllSubmenus(); // Recolhe todos os submenus ao fechar a sidebar
      }
      menuBtnChange();
    });
  
    searchBtn.addEventListener("click", () => {
      sidebar.classList.toggle("open");
      if (!sidebar.classList.contains("open")) {
        closeAllSubmenus(); // Recolhe todos os submenus ao fechar a sidebar
      }
      menuBtnChange();
    });
  
    function menuBtnChange() {
      if (sidebar.classList.contains("open")) {
        closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");
      } else {
        closeBtn.classList.replace("bx-menu-alt-right", "bx-menu");
      }
    }
  
    function closeAllSubmenus() {
      document.querySelectorAll(".sub-menu.open").forEach(subMenu => {
        subMenu.classList.remove("open");
      });
    }
  </script>
  
</body>
</html>
